{
  "task_description": "# PRD ‚Äì PLAN 1: MEETING MODE (CORE FOUNDATION)\n\n## 1. M·ª•c ti√™u (Goal)\n\nT·∫°o **Meeting Mode** trong Meetdy ƒë·ªÉ:\n\n* Ghi l·∫°i **to√†n b·ªô m·ªôt phi√™n h·ªçp**\n* L∆∞u audio + transcript theo **session**\n* T√°ch bi·ªát ho√†n to√†n v·ªõi ch·∫ø ƒë·ªô dictation hi·ªán t·∫°i\n\nüëâ Sau PLAN 1, Meetdy **ƒë√£ l√† m·ªôt meeting recorder h·ª£p l·ªá**, d√π ch∆∞a c√≥ AI summary.\n\n---\n\n## 2. Ph·∫°m vi (Scope)\n\n### IN SCOPE\n\n* Meeting Mode (Start / Stop)\n* Ghi audio th√†nh file\n* Sinh transcript raw\n* L∆∞u tr·ªØ theo session\n* UI c∆° b·∫£n ƒë·ªÉ ƒëi·ªÅu khi·ªÉn\n\n### OUT OF SCOPE\n\n* Summary AI\n* Action items\n* Search / history UI\n* Cloud sync\n* Multi-speaker\n\n---\n\n## 3. User Stories\n\n### US-01: Start a meeting\n\n> L√† ng∆∞·ªùi d√πng, t√¥i mu·ªën b·∫•m "Start Meeting" ƒë·ªÉ b·∫Øt ƒë·∫ßu ghi l·∫°i cu·ªôc h·ªçp.\n\n**Acceptance**\n\n* C√≥ tr·∫°ng th√°i "Recording"\n* C√≥ hi·ªÉn th·ªã th·ªùi gian ƒëang ghi\n\n---\n\n### US-02: Stop a meeting\n\n> L√† ng∆∞·ªùi d√πng, t√¥i mu·ªën d·ª´ng h·ªçp v√† h·ªá th·ªëng t·ª± x·ª≠ l√Ω d·ªØ li·ªáu.\n\n**Acceptance**\n\n* Audio ƒë∆∞·ª£c l∆∞u\n* Transcript ƒë∆∞·ª£c t·∫°o\n* Kh√¥ng m·∫•t d·ªØ li·ªáu n·∫øu x·ª≠ l√Ω l√¢u\n\n---\n\n### US-03: Name a meeting\n\n> L√† ng∆∞·ªùi d√πng, t√¥i mu·ªën ƒë·∫∑t t√™n cu·ªôc h·ªçp ƒë·ªÉ d·ªÖ nh·ªõ.\n\n**Acceptance**\n\n* C√≥ t√™n m·∫∑c ƒë·ªãnh (timestamp)\n* C√≥ th·ªÉ s·ª≠a sau khi d·ª´ng\n\n---\n\n### US-04: Keep dictation mode intact\n\n> L√† ng∆∞·ªùi d√πng c≈© c·ªßa Handy, t√¥i v·∫´n d√πng dictation nh∆∞ tr∆∞·ªõc.\n\n**Acceptance**\n\n* Dictation kh√¥ng b·ªã ·∫£nh h∆∞·ªüng\n* Hai mode t√°ch bi·ªát r√µ r√†ng\n\n---\n\n## 4. Functional Requirements\n\n### 4.1 Meeting Mode Toggle\n\n* C√≥ 2 mode:\n\n  * Quick Dictation (default)\n  * Meeting Mode\n* Ch·ªâ **1 mode ho·∫°t ƒë·ªông t·∫°i 1 th·ªùi ƒëi·ªÉm**\n\n---\n\n### 4.2 Meeting Session Lifecycle\n\n**States**\n\n1. Idle\n2. Recording\n3. Processing\n4. Completed\n5. Failed (recoverable)\n\n**Rules**\n\n* Kh√¥ng ƒë∆∞·ª£c start meeting m·ªõi khi ƒëang Recording\n* Processing c√≥ th·ªÉ ch·∫°y n·ªÅn\n\n---\n\n### 4.3 Audio Recording\n\n* Ghi audio li√™n t·ª•c t·ª´ mic\n* L∆∞u th√†nh **1 file duy nh·∫•t**\n* Format:\n\n  * WAV (∆∞u ti√™n)\n* Kh√¥ng auto-split\n\n---\n\n### 4.4 Transcription\n\n* Ch·∫°y **sau khi Stop**\n* D√πng pipeline STT hi·ªán c√≥\n* Output:\n\n  * Raw transcript\n  * Kh√¥ng c·∫ßn format ƒë·∫πp\n\n---\n\n### 4.5 Data Persistence (Local)\n\nM·ªói meeting session ph·∫£i c√≥:\n\n* Unique ID\n* Metadata\n* Audio file\n* Transcript file\n\n**Nguy√™n t·∫Øc**\n\n* Kh√¥ng l∆∞u t·∫°m trong RAM\n* Crash app v·∫´n kh√¥ng m·∫•t d·ªØ li·ªáu\n\n---\n\n## 5. Non-Functional Requirements\n\n### Performance\n\n* Recording kh√¥ng lag\n* Transcription c√≥ th·ªÉ ch·∫≠m nh∆∞ng kh√¥ng block UI\n\n### Reliability\n\n* N·∫øu transcription fail:\n\n  * Audio v·∫´n gi·ªØ\n  * C√≥ th·ªÉ retry\n\n### Privacy\n\n* Kh√¥ng g·ª≠i audio ra ngo√†i\n* Kh√¥ng analytics m·∫∑c ƒë·ªãnh\n\n---\n\n## 6. UX Requirements\n\n### Controls\n\n* Start / Stop r√µ r√†ng\n* Tr·∫°ng th√°i d·ªÖ nh·∫≠n bi·∫øt\n\n### Feedback\n\n* Recording indicator (icon / m√†u)\n* Processing indicator sau khi stop\n\n### Error Handling\n\n* Th√¥ng b√°o r√µ:\n\n  * Kh√¥ng c√≥ mic\n  * Kh√¥ng load ƒë∆∞·ª£c model\n  * Transcription fail\n\n---\n\n## 7. Data Model (Conceptual ‚Äì kh√¥ng code)\n\n### MeetingSession\n\n* id\n* title\n* created_at\n* duration\n* status\n\n### Assets\n\n* audio_path\n* transcript_path\n\n---\n\n## 8. Folder / Storage Strategy (Conceptual)\n\n* M·ªói meeting = 1 folder ri√™ng\n* Kh√¥ng tr·ªôn v·ªõi dictation data\n* C√≥ th·ªÉ migrate sang DB sau n√†y\n\n---\n\n## 9. Edge Cases\n\n* User stop app khi ƒëang recording\n* User stop app khi ƒëang processing\n* Disk full\n* Mic b·ªã disconnect gi·ªØa ch·ª´ng\n\n**Y√™u c·∫ßu**\n\n* Kh√¥ng crash\n* Kh√¥ng corrupt audio\n\n---\n\n## 10. Success Criteria (PLAN 1)\n\nPLAN 1 ƒë∆∞·ª£c coi l√† **ho√†n th√†nh** khi:\n\n* Start/Stop meeting ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh\n* Audio + transcript ƒë∆∞·ª£c l∆∞u ƒë√∫ng\n* Dictation mode kh√¥ng b·ªã ·∫£nh h∆∞·ªüng\n* C√≥ th·ªÉ d√πng ƒë·ªÉ ghi h·ªçp th·∫≠t (d√π ch∆∞a c√≥ summary)\n\n---\n\n## 11. Notes cho c√°c PLAN sau\n\nPLAN 1 **KH√îNG ƒë∆∞·ª£c**:\n\n* √âp format transcript\n* G·∫Øn logic AI\n* G·∫Øn search\n\nüëâ PLAN 1 ch·ªâ l√†m **"ghi & gi·ªØ"**\n\n\n---\n\n## End of PLAN 1 PRD",
  "scoped_services": ["main"],
  "files_to_modify": [
    "src/App.tsx",
    "src/components/Sidebar.tsx",
    "src/stores/settingsStore.ts",
    "src-tauri/src/lib.rs",
    "src-tauri/src/managers/mod.rs",
    "src-tauri/src/commands/mod.rs",
    "src-tauri/src/settings.rs"
  ],
  "files_to_create": [
    "src-tauri/src/managers/meeting.rs",
    "src-tauri/src/commands/meeting.rs",
    "src/stores/meetingStore.ts",
    "src/components/meeting/MeetingMode.tsx",
    "src/components/meeting/MeetingControls.tsx",
    "src/components/meeting/MeetingStatusIndicator.tsx",
    "src/components/meeting/MeetingTitleEditor.tsx",
    "src/components/meeting/index.ts"
  ],
  "files_to_reference": [
    "src-tauri/src/managers/audio.rs",
    "src-tauri/src/managers/history.rs",
    "src-tauri/src/managers/transcription.rs",
    "src-tauri/src/audio_toolkit/audio/recorder.rs",
    "src/stores/settingsStore.ts",
    "src/components/settings/general/GeneralSettings.tsx"
  ],
  "key_patterns": {
    "rust_manager": {
      "description": "Thread-safe manager with Arc<Mutex<>> pattern",
      "example_file": "src-tauri/src/managers/audio.rs",
      "key_elements": ["Clone trait", "Arc<Mutex<>>", "AppHandle", "State machine enum"]
    },
    "database_migration": {
      "description": "SQLite migrations using rusqlite_migration",
      "example_file": "src-tauri/src/managers/history.rs",
      "key_elements": ["static MIGRATIONS", "M::up()", "rusqlite::Connection"]
    },
    "zustand_store": {
      "description": "State management with subscribeWithSelector middleware",
      "example_file": "src/stores/settingsStore.ts",
      "key_elements": ["create()", "subscribeWithSelector", "commands from @/bindings"]
    },
    "tauri_commands": {
      "description": "Commands exposed to frontend via specta",
      "example_file": "src-tauri/src/commands/audio.rs",
      "key_elements": ["#[tauri::command]", "#[specta::specta]", "State<>"]
    }
  },
  "created_at": "2025-12-29T20:52:25.447319",
  "updated_at": "2025-12-29T21:20:00.000000"
}
